<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hacktopus404/frontend â€” Folder Explorer</title>

    <!-- Correctly encoded SVG favicon -->
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2358a6ff'%3E%3Cpath d='M10 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z'/%3E%3C/svg%3E"
    />

    <style>
      * {
        -webkit-tap-highlight-color: transparent;
        box-sizing: border-box;
        cursor: url("https://sweezy-cursors.com/wp-content/uploads/cursor/minecraft-enchanted-diamond-sword-animated/minecraft-enchanted-diamond-sword-animated-pointer-32x32.png"),
          auto !important;
      }
      body {
        font-family: monospace;
        background: #0d1117;
        color: #c9d1d9;
        padding: 20px;
        font-size: 1rem;
      }
      h2 {
        color: #58a6ff;
        margin-bottom: 8px;
      }

      ul {
        display: inline-block;
        list-style-type: none;
        padding-left: 16px;
        margin: 0;
      }
      li {
        line-height: 1.7;
        position: relative;
        cursor: url("https://sweezy-cursors.com/wp-content/uploads/cursor/minecraft-enchanted-golden-sword-animated/minecraft-enchanted-golden-sword-animated-pointer-32x32.png"),
          pointer !important;
      }

      li.folder::before {
        content: "â–¶";
        display: inline-block;
        margin-left: 5.5px;
        margin-right: 0.3em;
        transition: transform 0.18s ease;
        width: 16px;
      }
      li.folder.open::before {
        transform: rotate(90deg);
      }
      li.folder.open {
        color: #79c0ff;
      }

      li.file::before {
        content: "ðŸ“„";
        margin-right: 0.3em;
      }
      li.file {
        margin-left: 3.5px;
        cursor: pointer;
      }
      li.file:hover {
        color: #79c0ff;
      }

      li.folder:hover {
        color: #79c0ff;
      }

      li.folder > ul {
        margin-left: 14px;
        border-left: 1px dashed #30363d;
        padding-left: 8px;
        display: none;
      }
      li.folder.open > ul {
        color: #c9d1d9;
        display: block;
        animation: fadeIn 0.15s ease-in;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      li.file.html-file {
        color: #ff5555;
      }
      li.file.html-file:hover {
        color: #ffd700;
      }
    </style>
  </head>
  <body>
    <h2>ðŸ“‚ Hacktopus404/frontend â€” Folder Explorer</h2>
    <ul id="repo-tree"></ul>

    <script>
      const owner = "Hacktopus404";
      const repo = "frontend";
      const branch = "main";
      const treeUrl = `https://api.github.com/repos/${owner}/${repo}/git/trees/${branch}?recursive=1`;
      const pagesBase = `https://${owner}.github.io/${repo}`;
      const ignoredFiles = ["LICENSE", "README.md"];

      // Fetch full repo structure once
      async function fetchRepoTree() {
        const res = await fetch(treeUrl, {
          headers: {
            "User-Agent": "FolderExplorer",
            Accept: "application/vnd.github+json",
          },
        });
        const data = await res.json();
        return data.tree;
      }

      // Build nested tree structure from paths (ignoring root index.html)
      function buildNestedTree(list) {
        const root = {};

        list.forEach((item) => {
          // Ignore LICENSE + README
          if (ignoredFiles.includes(item.path)) return;

          // Ignore only root index.html
          if (item.path.toLowerCase() === "index.html") return;

          const parts = item.path.split("/");
          let current = root;

          parts.forEach((part, i) => {
            if (!current[part])
              current[part] = { __filesize: item.size ?? null };

            if (i === parts.length - 1) {
              current[part].__type = item.type; // blob (file) or tree (folder)
            }
            current = current[part];
          });
        });

        return root;
      }

      // Render DOM recursively
      function renderTree(obj, parentUl, path = "") {
        Object.entries(obj).forEach(([name, value]) => {
          if (name.startsWith("__")) return;

          const li = document.createElement("li");
          const newPath = path ? `${path}/${name}` : name;

          if (value.__type === "blob") {
            li.classList.add("file");
            li.textContent = name;
            if (name.toLowerCase().endsWith(".html"))
              li.classList.add("html-file");

            li.addEventListener("click", (e) => {
              e.stopPropagation();
              const fileUrl = `${pagesBase}/${newPath}`;
              window.open(fileUrl, "_blank");
            });
          } else {
            li.classList.add("folder");
            li.textContent = name;

            const nestedUl = document.createElement("ul");
            li.appendChild(nestedUl);

            li.addEventListener("click", (e) => {
              e.stopPropagation();
              li.classList.toggle("open");
            });

            renderTree(value, nestedUl, newPath);
          }

          parentUl.appendChild(li);
        });
      }

      // Load everything
      (async () => {
        const tree = await fetchRepoTree();
        const nested = buildNestedTree(tree);
        renderTree(nested, document.getElementById("repo-tree"));
      })();
    </script>
  </body>
</html>
